{
    "$schema":"https://hbidvanalyticsweb.z20.web.core.windows.net/schema/processPayload/schema/payload.schema.json",
    "processId":62000,
    "parentProcessId":null,
    "displayName":"AmzAPIPOCreatedAfter_SourceToStage",
    "processType":"Data",
    "dataFactoryInstance":"01",
    "pipelineName":"common_driver_webhook_to_stage",
    "isActive":true,
    "overwriteProcess": true,
    "configurationPayload":{
   "processPayload": [
     {
       "processSystem": "dataFactory",
       "processType": "webhook",
       "label": "Source -> Raw Ingest",
       "processConfig": {
         "functionSecrets": {
           "functionCodeSecret": "Function-GSX-HostKey",
           "functionUrlSecret": "Function-GSXFindItems-Url"
         },
         "requestBody": {
             "requestType": "findSelCodes",
             "apiHost": "GSX",
             "blobContainer": "gsx",
             "saveFileExtension":"json",
             "saveFileName": "*",
             "accountNumber": "010621454722",
             "queryColumn": "selcodeIdentifier.account",
             "queryValue": "010621454722"
         }
       }
     },
     {
         "processSystem": "databricks",
         "processType": "notebook",
         "label": "Raw Ingest -> Staging Ingest",
         "processConfig": {
             "notebookPath": "/Common/01/Workflows/Pipelines/Staging/AmzVendorOrderAPI/vendororderpo_api_raw_ingest_to_stage_ingest",
             "linkedService": {
                 "jobComplexity": "complex",
                 "jobSize": "small",
                 "clusterConfig": {
                     "workerType": "Standard_F4s",
                     "workers": "4",
                     "driverType": "Standard_F4s"
                 }
             }
         }
     },
     {
         "processSystem": "databricks",
         "processType": "notebook",
         "label": "Staging Ingest -> Staging Archive",
         "processConfig": {
             "notebookPath": "/Common/DataPlatform/Workflows/Pipelines/Staging/Common/common_staging_ingest_to_archive",
             "linkedService": {
                 "jobComplexity": "simple",
                 "jobSize": "small",
                 "clusterConfig": {
                     "workerType": "Standard_F4s",
                     "workers": "4",
                     "driverType": "Standard_F4s"
                 }
             }
         }
     }
   ],
   "dataPayload": [
     {
       "dataSystem": "dataFactory",
       "type": "binary",
       "label": "Raw Ingest",
       "config": {
         "container": "raw",
         "directory": "Product/US/GSX/FindItems/Ingest",
         "file": "",
         "log": "raw/Product/US/GSX/Log/"
       }
     },
     {
       "dataSystem": "dataFactory",
       "type": "binary",
       "label": "Raw Archive",
       "config": {
         "container": "raw",
         "directory": "Product/US/GSX/FindItems/Archive",
         "file": "",
         "log": "raw/Product/US/GSX/Log/"
       }
     },
     {
         "dataSystem": "databricks",
         "label": "Raw Ingest Source",
         "dataSource": "json",
         "dataConfig": {
             "entityName": "VendorOrderAPI",
             "container": "/mnt/raw",
             "directory": "Product/US/GSX/FindItems/Ingest/@@Year@@/@@Month@@/@@Day@@/",
             "path": "/mnt/raw/Product/US/GSX/FindItems/Ingest/@@Year@@/@@Month@@/@@Day@@/",
             "file": "",
             "options": {
                 "dateFormat": "yyyy-MM-dd",
                 "timestampFormat": "yyyy-MM-dd HH:mm:ss.SSSSSSS",
                 "multiLine": "True"
             }
         }
     },
     {
         "label": "Staging Ingest Sink",
         "dataSystem": "databricks",
         "dataSource": "delta",
         "dataConfig": {
             "path": "/mnt/stage/Product/US/GSX/FindItems/Ingest",
             "mode":"overwrite",
             "options": {
                 "overwriteSchema": false
             }
         }
     },
     {
         "label": "Staging Archive Sink",
         "dataSystem": "databricks",
         "dataSource": "delta",
         "dataConfig": {
             "path": "/mnt/stage/Product/US/GSX/FindItems/Archive",
             
             "mergeColumns": [
                 "PurchaseOrderNumber",
                 "AmazonProductIdentifier"
                 
             ]
         }
     }
   ]
 }
 }